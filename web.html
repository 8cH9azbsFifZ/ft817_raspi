<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Rig Control 0.1</title>
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
<style type="text/css" media="screen">@import "iphonenav.css";</style>
<script type="application/x-javascript" src="iphonenav.js"></script>

</head>

<body>
    <h1 id="pageTitle"></h1>
    <a id="homeButton" class="button" href="#settings">Settings</a>
    <a class="button" href="#manualForm">Set Freq.</a>
    
    <ul id="settings" title="Settings" selected="true">
        <li><a href="#Frequency">Frequency</a></li>
        <li><a href="#Mode">Mode</a></li>
    </ul>
    <ul id="Frequency" title="Frequency">
        <li><a href="#setFreq">Set Frequency</a></li>
        <li><a href="#getFreq">Get Frequency</a></li>
    </ul>
    <ul id="Mode" title="Mode">
        <li><a href="#setMode">Set Mode</a></li>
        <li><a href="#getMode">Get Mode</a></li>
    </ul>

    <div id="setMode" class="panel" title="Mode">
   <li><a class="clickButton" href="#" onclick="click_setMode('LSB');">LSB</a></li>
        <li><a class="clickButton" href="#USB" onclick="click_setMode('USB');">USB</a></li>
        <li><a class="clickButton" href="#AM onclick="click_setMode('AM');"">AM</a></li>
        <li><a class="clickButton" href="#FM" onclick="click_setMode('FM');">FM</a></li>
        <li><a class="clickButton" href="#CW" onclick="click_setMode('CW');">CW</a></li>
   <h2><div id="setModeText"></div></h2>
    </div>
    
    <div id="getFreq" class="panel" title="Frequency">
   <a class="clickButton" href="#" onclick="click_getFreq();">Get Frequency</a>
   <h2>
      <div id="freqText"></div>                
   </h2>
    </div>
    <div id="getMode" class="panel" title="Mode">
   <a class="clickButton" href="#" onclick="click_getMode();">Get Mode</a>
   <h2>
      <div id="modeText"></div>                
   </h2>
    </div>
    <div id="getMem" class="panel" title="Memory">
   <a class="clickButton" href="#" onclick="click_getMemory();">Get Memory</a>
   <h2>
      <div id="memText"></div>                
   </h2>
    </div>    <div id="searchResults" class="panel" title="Search">
        <h2>Search results go here...</h2>
    </div>
    <form id="manualForm" class="dialog" method="POST" action="/cgi-bin/ctl.pl?">
        <fieldset>
            <h1>Frequency Set</h1>
            <a class="button toolButton goButton" href="#" onclick="submit_manualForm();">Set Freq.</a>
            <input type="hidden" name="cmd" value="set_freq" />
            <label>Frequency:</label>
            <input type="text" name="val1" onkeypress="dokeypress(event, 'submit_manualForm')"/>
        </fieldset>
    </form>
    <form id="setFreq" class="dialog" method="POST" action="/cgi-bin/ctl.pl?">
        <fieldset>
            <h1>Frequency Set</h1>
            <a class="button toolButton goButton" href="#" onclick="submit_setFreq();">Set Freq.</a>
            <input type="hidden" name="cmd" value="set_freq" />
            <label>Frequency:</label>
            <input type="text" name="val1" onkeypress="dokeypress(event, 'submit_setFreq')"/>
        </fieldset>
    </form>

    
    <script language="javascript">
      function submit_manualForm() {
        document.forms["manualForm"].submit();
      }

      function submit_setFreq() {
        document.forms["setFreq"].submit();
      }

      function dokeypress(e,functionName)
      {
         if (e.which == 13)
            {   
                  document.activeElement.blur();
                  eval(functionName + "();");
            }
      }
      function click_getFreq() {
        var req = getReq();
   req.open("GET",'/cgi-bin/control_script.pl?cmd=get_freq', true);
       req.onreadystatechange = function () {
       document.getElementById('freqText').innerHTML = req.responseText;
   }
   req.send(null);   
      }
      function click_setMode(val1) {
        var req = getReq();
   req.open("GET",'/cgi-bin/control_script.pl?cmd=set_mode&val1='+val1, true);
       req.onreadystatechange = function () {
       document.getElementById('setModeText').innerHTML = req.responseText;
   }
   req.send(null);   
      }

      function click_getMode() {
        var req = getReq();
   req.open("GET",'/cgi-bin/control_script.pl?cmd=get_mode', true);
       req.onreadystatechange = function () {
       document.getElementById('modeText').innerHTML = req.responseText;
   }
   req.send(null);   
      }
      
      function getReq(url) {
        var req;

   // Browser compatibility check                  
   if (window.XMLHttpRequest) {
      req = new XMLHttpRequest();
       } else if (window.ActiveXObject) {
   
    try {
      req = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
   
      try {
        req = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (e) {}
    }
   
   }
   return req;
      }
    </script>
    
</body>
</html>

#### END HTML ####

